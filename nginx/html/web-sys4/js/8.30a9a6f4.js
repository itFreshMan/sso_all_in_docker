(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"7YsS":function(e,t,a){},"8hgZ":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.showActionButton?a("el-row",{staticStyle:{"margin-bottom":"20px"}},[a("el-col",{attrs:{span:6}},[a("span",{staticStyle:{height:"40px","line-height":"40px"}},[e._v("数据权限名称")])]),a("el-col",{attrs:{span:10,offset:1}},[a("el-input",{attrs:{placeholder:"数据权限"},model:{value:e.privilegeFilter,callback:function(t){e.privilegeFilter=t},expression:"privilegeFilter"}})],1),a("el-col",{staticStyle:{height:"40px","line-height":"40px"},attrs:{span:4,offset:1}},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.add(t)}}},[e._v("新增")])],1)],1):e._e(),a("el-tree",{ref:e.ref,attrs:{data:e.tree.data,"node-key":"id",accordion:"",lazy:!0,load:e.asyncLoadTreeNode,"filter-node-method":e.filterNode,props:e.tree.defaultProps,"show-checkbox":!1,"highlight-current":!0,"expand-on-click-node":!1},on:{"node-click":e.clickNode},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,r=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[e._v(e._s(r.name))]),e.showActionButton?a("span",[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.add(t,r,n)}}},[e._v("新增")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.edit(t,r,n)}}},[e._v("修改")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.remove(t,r,n)}}},[e._v("删除")])],1):e._e()])}}])})],1)},r=[],i=(a("f3/d"),a("rGqo"),a("ls82"),a("MECJ")),s=(a("VRzm"),{name:"privilegeTree",props:{showActionButton:{type:Boolean,require:!1,default:!1}},data:function(){return{ref:"tree",privilegeFilter:"",tree:{data:[],defaultProps:{isLeaf:"leaf"}}}},watch:{privilegeFilter:function(e,t){this.$refs[this.ref].filter(e)}},methods:{asyncLoadTreeNode:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,a){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0===t.level){e.next=7;break}return n=[],e.next=4,this.$api.privileges.gerPrivilegeList(t.data.id,"");case 4:r=e.sent,r.data.data&&r.data.data.forEach(function(e){n.push({id:e.id,code:e.code,name:e.name,parentId:e.parentId,path:e.path,leaf:0===e.childCount})}),a(n);case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),initTreeNodes:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.tree.data=[],console.log("dataId",this.dataId),e.next=4,this.$api.privileges.gerPrivilege(this.dataId);case 4:t=e.sent,t.data.data&&this.tree.data.push({id:t.data.data.id,code:t.data.data.code,name:t.data.data.name,parentId:t.data.data.parentId,path:t.data.data.path,leaf:0===t.data.data.childCount});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},add:function(e,t,a){this.$emit("add",e,t,a)},edit:function(e,t,a){this.$emit("edit",e,t,a)},remove:function(e,t,a){this.$emit("remove",e,t,a)},clickNode:function(e,t,a){this.$emit("clickNode",e,t,a)},getCheckedNodes:function(){return this.$refs[this.ref].getCheckedNodes()},getElementTreeRef:function(){return this.$refs[this.ref]}},computed:{dataId:function(){return""===localStorage.getItem("dataId")?"-1":localStorage.getItem("dataId")}},mounted:function(){this.initTreeNodes()}}),l=s,o=(a("EI4X"),a("KHd+")),c=Object(o["a"])(l,n,r,!1,null,null,null);t["a"]=c.exports},"9Djy":function(e,t,a){},EI4X:function(e,t,a){"use strict";var n=a("7YsS"),r=a.n(n);r.a},Eb3Z:function(e,t,a){"use strict";var n=a("qXR0"),r=a.n(n);r.a},"f3/d":function(e,t,a){var n=a("hswa").f,r=Function.prototype,i=/^\s*function ([^ (]*)/,s="name";s in r||a("nh4g")&&n(r,s,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},izUu:function(e,t,a){"use strict";var n=a("9Djy"),r=a.n(n);r.a},qXR0:function(e,t,a){},zQ75:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("el-row",[a("el-col",{staticClass:"el-header",attrs:{span:24}},[a("el-form",{staticClass:"formHeaderStyle",attrs:{inline:!0},model:{value:e.searchForm,callback:function(t){e.searchForm=t},expression:"searchForm"}},[a("el-form-item",{attrs:{label:"系统名称"}},[a("el-input",{attrs:{placeholder:"系统名称"},model:{value:e.searchForm.clientName,callback:function(t){e.$set(e.searchForm,"clientName",t)},expression:"searchForm.clientName"}})],1),a("el-form-item",{attrs:{label:"系统编码"}},[a("el-input",{attrs:{placeholder:"系统编码"},model:{value:e.searchForm.clientCode,callback:function(t){e.$set(e.searchForm,"clientCode",t)},expression:"searchForm.clientCode"}})],1),a("el-form-item",{attrs:{label:"系统状态"}},[a("el-select",{model:{value:e.searchForm.state,callback:function(t){e.$set(e.searchForm,"state",t)},expression:"searchForm.state"}},[a("el-option",{attrs:{value:"",label:"全部"}}),a("el-option",{attrs:{value:"10A",label:"正常"}}),a("el-option",{attrs:{value:"10X",label:"已注销"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.refreshTable}},[e._v("查询\n            ")])],1),a("el-form-item",[a("el-button",{directives:[{name:"shiro",rawName:"v-shiro:hasPermission",value:e.previlegeCodes.add,expression:"previlegeCodes.add",arg:"hasPermission"}],attrs:{type:"primary"},on:{click:e.add}},[e._v("新增\n            ")])],1)],1)],1)],1)],1),a("el-main",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.table,expression:"loading.table"}],staticStyle:{width:"100%"},attrs:{data:e.tableData.data,"highlight-current-row":"",border:""}},[a("el-table-column",{attrs:{prop:"clientName",label:"系统名称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"clientCode",label:"系统编码","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"clientTypeName",label:"系统类型",width:"100px","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"accessStrategyName",label:"访问控制",width:"100px","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"innerUrl",label:"内网地址","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"outterUrl",label:"外网地址","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"230px"},scopedSlots:e._u([{key:"default",fn:function(t){return["10A"===t.row.state?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.authorize(t.row)}}},[e._v("授权\n              ")]):e._e(),"10A"===t.row.state?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.edit(t.row)}}},[e._v("编辑\n              ")]):e._e(),"10A"!==t.row.state?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.enable(t.row)}}},[e._v("激活\n              ")]):e._e(),"10A"===t.row.state?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.disable(t.row)}}},[e._v("注销\n              ")]):e._e()]}}])})],1)],1),a("el-col",{staticStyle:{"margin-top":"10px"},attrs:{span:24}},[a("el-pagination",{attrs:{background:"","page-sizes":e.tableData.pageList,"page-size":e.tableData.pageSize,"current-page":e.tableData.pageNumber,layout:"sizes, prev, pager, next",total:e.tableData.total},on:{"size-change":e.pageSizeChangeHandler,"current-change":e.pageNumberChangeHandler}})],1)],1),a("client-dialog",{ref:e.ref.dialog,on:{afterAction:e.refreshTable}}),a("client-auth-dialog",{ref:e.ref.authorize})],1)],1)},r=[],i=(a("ls82"),a("MECJ")),s=a("B814"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{ref:e.refs.dialog,attrs:{title:e.dialog.title,visible:e.dialog.visible,fullscreen:!0,width:"50%"},on:{"update:visible":function(t){e.$set(e.dialog,"visible",t)},close:e.reset}},[a("el-form",{ref:e.refs.form,attrs:{model:e.form.content,rules:e.form.rules,"label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"系统编码",prop:"clientCode"}},[a("el-input",{attrs:{disabled:!0,placeholder:"系统自动生成"},model:{value:e.form.content.clientCode,callback:function(t){e.$set(e.form.content,"clientCode",t)},expression:"form.content.clientCode"}})],1),a("el-form-item",{attrs:{label:"系统名称",prop:"clientName"}},[a("el-input",{model:{value:e.form.content.clientName,callback:function(t){e.$set(e.form.content,"clientName",t)},expression:"form.content.clientName"}})],1),a("el-form-item",{attrs:{label:"系统类型",prop:"clientType"}},[a("el-radio-group",{model:{value:e.form.content.clientType,callback:function(t){e.$set(e.form.content,"clientType",t)},expression:"form.content.clientType"}},e._l(e.form.preservedData.clientTypes,function(t){return a("el-radio",{key:t.VALUE,attrs:{label:t.VALUE}},[e._v(e._s(t.TEXT)+"\n        ")])}))],1),a("el-form-item",{attrs:{label:"访问控制",prop:"accessStrategy"}},[a("el-radio-group",{model:{value:e.form.content.accessStrategy,callback:function(t){e.$set(e.form.content,"accessStrategy",t)},expression:"form.content.accessStrategy"}},e._l(e.form.preservedData.accessStrategies,function(t){return a("el-radio",{key:t.VALUE,attrs:{label:t.VALUE}},[e._v(e._s(t.TEXT)+"\n        ")])}))],1),a("el-form-item",{attrs:{label:"数据权限",prop:"dataPrivilege"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入数据权限"},model:{value:e.form.content.dataPrivilege,callback:function(t){e.$set(e.form.content,"dataPrivilege",t)},expression:"form.content.dataPrivilege"}},[a("el-option",{staticStyle:{height:"auto"},attrs:{label:e.form.content.dataPrivilegeName,value:e.form.content.dataPrivilege}},[a("privilege-tree",{attrs:{"show-action-button":!1},on:{clickNode:e.nodeClick}})],1)],1)],1),a("el-form-item",{attrs:{label:"内网地址",prop:"innerUrl"}},[a("el-input",{model:{value:e.form.content.innerUrl,callback:function(t){e.$set(e.form.content,"innerUrl",t)},expression:"form.content.innerUrl"}})],1),a("el-form-item",{attrs:{label:"外网地址",prop:"outterUrl"}},[a("el-input",{model:{value:e.form.content.outterUrl,callback:function(t){e.$set(e.form.content,"outterUrl",t)},expression:"form.content.outterUrl"}})],1),a("el-form-item",{attrs:{label:"系统公钥",prop:"accessTokenPublicKey"}},[a("el-input",{model:{value:e.form.content.accessTokenPublicKey,callback:function(t){e.$set(e.form.content,"accessTokenPublicKey",t)},expression:"form.content.accessTokenPublicKey"}})],1),a("el-form-item",{attrs:{label:"系统私钥",prop:"accessTokenPrivateKey"}},[a("el-col",{attrs:{span:18}},[a("el-input",{model:{value:e.form.content.accessTokenPrivateKey,callback:function(t){e.$set(e.form.content,"accessTokenPrivateKey",t)},expression:"form.content.accessTokenPrivateKey"}})],1),a("el-col",{staticStyle:{"padding-left":"0.5em"},attrs:{span:6}},[a("el-button",{attrs:{type:"primary",size:"mini",loading:e.generateKeyIng},on:{click:e.generateKeys}},[e._v("一键生成")])],1)],1),a("el-form-item",{attrs:{label:"显示顺序"}},[a("el-input-number",{attrs:{min:0},model:{value:e.form.content.dispOrder,callback:function(t){e.$set(e.form.content,"dispOrder",t)},expression:"form.content.dispOrder"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{model:{value:e.form.content.clientDesc,callback:function(t){e.$set(e.form.content,"clientDesc",t)},expression:"form.content.clientDesc"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")]),a("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1)],1)},o=[],c=(a("rGqo"),a("yt8O"),a("k5N+")),u=(a("f3/d"),a("8hgZ")),d={name:"ClientDialog",components:{PrivilegeTree:u["a"]},data:function(){return{refs:{dialog:"dialog",form:"form"},dialog:{title:"",visible:!1},generateKeyIng:!1,form:{content:{clientId:null,clientCode:"",clientName:"",clientType:"",accessStrategy:"",innerUrl:"",outterUrl:"",dispOrder:"",clientDesc:"",accessTokenPublicKey:"",accessTokenPrivateKey:"",dataPrivilege:"",dataPrivilegeName:""},rules:{clientName:[{required:!0,message:"请输入系统名称",trigger:"blur"}],dataPrivilege:[{required:!0,message:"请输入数据权限",trigger:"blur"}],clientType:[{required:!0,message:"请选择系统类型",trigger:"change"}],accessStrategy:[{required:!0,message:"请选择访问控制",trigger:"change"}]},preservedData:{clientTypes:[],accessStrategies:[]}}}},methods:{generateKeys:function(){var e=this;this.generateKeyIng=!0,this.$api.clients.generateKeys().then(function(t){var a=t.data.data;e.form.content.accessTokenPublicKey=a.publicKey,e.form.content.accessTokenPrivateKey=a.privateKey,e.generateKeyIng=!1})},showAddClientDialog:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(t in e.prev=0,this.form.content)this.form.content[t]="";return e.next=4,this.$api.clients.getLastestDisplayOrder();case 4:a=e.sent,this.form.content.dispOrder=a.data.data,this.dialog.title="新增",this.dialog.visible=!0,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.$message({showClose:!0,message:e.t0.data.meta.message,type:"error"});case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(){return e.apply(this,arguments)}}(),showEditClientDialog:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,null===t){e.next=8;break}return e.next=4,this.$api.clients.getClientsByClientId(t);case 4:a=e.sent,this.form.content=a.data.data,this.dialog.title="编辑",this.dialog.visible=!0;case 8:e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.$message({showClose:!0,message:e.t0.data.meta.message,type:"error"});case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t){return e.apply(this,arguments)}}(),reset:function(){this.$refs[this.refs.form].clearValidate(),null===this.form.content.clientId&&this.$refs[this.refs.form].resetFields()},onSubmit:function(){var e=this;this.$refs[this.refs.form].validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(a){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,""===e.form.content.clientId?e.$api.clients.addClient(e.form.content):e.$api.clients.editClient(e.form.content);case 5:n=t.sent,e.$message({showClose:!0,message:n.data.meta.message,type:"success"}),e.dialog.visible=!1,e.$emit("afterAction"),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),e.$message({showClose:!0,message:t.t0.data.meta.message,type:"error"});case 14:case"end":return t.stop()}},t,this,[[2,11]])}));return function(e){return t.apply(this,arguments)}}())},nodeClick:function(e){this.form.content.dataPrivilege=e.id,this.form.content.dataPrivilegeName=e.name}},created:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([this.$api.clients.getAccessStrategies(),this.$api.clients.getClientType()]);case 3:t=e.sent,a=Object(c["a"])(t,2),n=a[0],r=a[1],this.form.preservedData.accessStrategies=n.data.data,this.form.preservedData.clientTypes=r.data.data,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),this.$message({showClose:!0,message:e.t0.data.meta.message,type:"error"});case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return function(){return e.apply(this,arguments)}}()},m=d,p=a("KHd+"),h=Object(p["a"])(m,l,o,!1,null,null,null),f=h.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{ref:"authClientManageRef",attrs:{title:"系统授权管理",visible:e.dialog.visible,fullscreen:!0,width:"50%"},on:{"update:visible":function(t){e.$set(e.dialog,"visible",t)},close:e.reset,open:e.handleOpen}},[a("div",{staticClass:"headerStyle"},[a("span",{staticStyle:{"font-size":"17px"}},[e._v("源系统: "+e._s(e.dialog.clientName))]),a("span",{staticClass:"qryButtonStyle"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleSaveClientAuths}},[e._v("保存\n    ")])],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{id:"clientAuth"}},[a("el-transfer",{attrs:{filterable:"",props:{key:"clientId",label:"clientName"},"filter-method":e.filterMethod,"filter-placeholder":"请输入系统名称或系统编码",titles:["未授权","已授权目标系统"],data:e.availableClients},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)])},v=[],b={name:"ClientAuthDialog",data:function(){return{loading:!1,dialog:{visible:!1,clientName:"",clientId:""},data:[],value:[],filterMethod:function(e,t){return t.clientName.indexOf(e)>-1||t.clientId.indexOf(e)>-1}}},computed:{availableClients:function(){var e=this;return this.data.filter(function(t){return t.clientId!==e.dialog.clientId})}},methods:{handleSaveClientAuths:function(){var e=this;try{this.loading=!0,this.$api.clients.addClientAuths(this.dialog.clientId,this.value.map(function(t){return{sourceClientId:e.dialog.clientId,targetClientId:t}})).then(function(t){e.loading=!1,e.$message({message:t.data.meta.message,type:"success"})})}catch(e){this.loading=!1,this.$message({showClose:!0,message:e.data.meta.message,type:"error"})}},reset:function(){this.value=[]},handleOpen:function(){this.getAvailableClients()},showClientAuthDialog:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,a){var n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:try{t&&(this.$api.clients.getClientAuths(t).then(function(e){console.log(e),n.value=e.data.data.map(function(e){return e.targetClientId})}),this.dialog.clientId=t,this.dialog.clientName=a,this.dialog.visible=!0)}catch(e){this.$message({showClose:!0,message:e.data.meta.message,type:"error"})}case 1:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),getAvailableClients:function(){var e=this;try{this.loading=!0,this.$api.clients.getClients({state:"10A"}).then(function(t){e.loading=!1,e.data=t.data.data})}catch(e){this.loading=!1,this.$message({showClose:!0,message:e.data.meta.message,type:"error"})}}},created:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.getAvailableClients();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},y=b,w=(a("Eb3Z"),Object(p["a"])(y,g,v,!1,null,null,null)),k=w.exports,C={name:"ClientSection",components:{"client-dialog":f,ClientAuthDialog:k},data:function(){return{ref:{dialog:"dialog",authorize:"authClientManageRef"},border:!0,previlegeCodes:{add:"SYS_CLIENT_ADD"},searchForm:{clientName:"",clientCode:"",state:""},tableData:{pageSize:s["a"].PAGE_SIZE,pageList:s["a"].PAGE_LIST,pageNumber:1,data:[]},loading:{search:!1,table:!1}}},methods:{fetchTableData:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r,i=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:this.tableData.pageSize,a=i.length>1&&void 0!==i[1]?i[1]:this.tableData.pageNumber,e.prev=2,this.loading.table=!0,e.next=6,this.$api.clients.getClientsByPage(t,a,this.searchForm);case 6:n=e.sent,r=n.data.data,this.tableData.data=r.list,this.tableData.total=r.total,this.tableData.pageSize=r.pageSize,this.tableData.pageNumber=r.pageNum,this.loading.table=!1,this.loading.search=!1,e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](2),console.error(e.t0),this.$message({showClose:!0,message:e.t0.data.meta.message,type:"error"});case 20:case"end":return e.stop()}},e,this,[[2,16]])}));return function(){return e.apply(this,arguments)}}(),refreshTable:function(){this.loading.search=!0,this.fetchTableData(this.tableData.pageSize,1,this.searchForm)},pageSizeChangeHandler:function(e){this.fetchTableData(e,1)},pageNumberChangeHandler:function(e){this.fetchTableData(this.tableData.pageSize,e)},add:function(){this.$refs[this.ref.dialog].showAddClientDialog()},edit:function(e){this.$refs[this.ref.dialog].showEditClientDialog(e.clientId)},authorize:function(e){"10A"===e.state?this.$refs[this.ref.authorize].showClientAuthDialog(e.clientId,e.clientName):this.$message({showClose:!0,message:"请先激活系统, 再进行授权!",type:"error"})},enable:function(e){var t=this;this.$confirm("此操作将激活【".concat(e.clientName,"】，是否继续？"),"激活",{type:"warning"}).then(function(){t.$api.clients.enableClient(e.clientId).then(function(e){t.fetchTableData(),t.$message({type:"success",message:e.data.meta.message})}).catch(function(e){t.$message({showClose:!0,message:e.data.meta.message,type:"error"})})})},disable:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.clients.getRelatedRoles(t.clientId);case 2:if(a=e.sent,console.log(a),!a.data.data||!a.data.data.length){e.next=7;break}return this.$message({showClose:!0,message:"该系統存在角色引用，请先解除挂载再注销！",type:"error"}),e.abrupt("return",!1);case 7:this.$confirm("此操作将注销【".concat(t.clientName,"】，是否继续？"),"注销",{type:"warning"}).then(function(){return n.$api.clients.disableClient(t.clientId)}).then(function(e){n.fetchTableData(),n.$message({type:"success",message:e.data.meta.message})}).catch(function(e){n.$message({showClose:!0,message:e.data.meta.message,type:"error"})});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},created:function(){this.fetchTableData()}},x=C,$=(a("izUu"),Object(p["a"])(x,n,r,!1,null,null,null));t["default"]=$.exports}}]);
//# sourceMappingURL=8.30a9a6f4.js.map