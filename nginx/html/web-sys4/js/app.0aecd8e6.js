(function(e){function t(t){for(var n,u,s=t[0],i=t[1],c=t[2],l=0,d=[];l<s.length;l++)u=s[l],a[u]&&d.push(a[u][0]),a[u]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);f&&f(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,u=1;u<r.length;u++){var s=r[u];0!==a[s]&&(n=!1)}n&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},u={13:0},a={13:0},o=[];function s(e){return i.p+"js/"+({}[e]||e)+"."+{0:"a9e19abb",1:"057a9bff",2:"ff5f40f7",3:"c957a1b5",4:"54d10963",5:"a8f04c1f",6:"9870710e",7:"df5dfe90",8:"30a9a6f4",9:"d83eae2b",10:"bbbc5c8d",11:"82cee8c0"}[e]+".js"}function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],r={0:1,1:1,2:1,3:1,4:1,5:1,6:1,7:1,8:1,9:1,11:1};u[e]?t.push(u[e]):0!==u[e]&&r[e]&&t.push(u[e]=new Promise(function(t,r){for(var n="css/"+({}[e]||e)+"."+{0:"7b467d74",1:"67d74bdc",2:"d724245f",3:"01586805",4:"ab15cade",5:"b36cc7bf",6:"796328b2",7:"ca15d92d",8:"d4b325f3",9:"bbcb6e90",10:"31d6cfe0",11:"e6a834db"}[e]+".css",u=i.p+n,a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var s=a[o],c=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(c===n||c===u))return t()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){s=l[o],c=s.getAttribute("data-href");if(c===n||c===u)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var n=t&&t.target&&t.target.src||u,a=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");a.request=n,r(a)},d.href=u;var f=document.getElementsByTagName("head")[0];f.appendChild(d)}).then(function(){u[e]=0}));var n=a[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise(function(t,r){n=a[e]=[t,r]});t.push(n[2]=o);var c,l=document.getElementsByTagName("head")[0],d=document.createElement("script");d.charset="utf-8",d.timeout=120,i.nc&&d.setAttribute("nonce",i.nc),d.src=s(e),c=function(t){d.onerror=d.onload=null,clearTimeout(f);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),u=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+n+": "+u+")");o.type=n,o.request=u,r[1](o)}a[e]=void 0}};var f=setTimeout(function(){c({type:"timeout",target:d})},12e4);d.onerror=d.onload=c,l.appendChild(d)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/web-sys4/",i.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var f=l;o.push([2,12]),r()})({2:function(e,t,r){e.exports=r("Vtdi")},"20nU":function(e,t,r){r("VRzm"),e.exports={deploy:{requestBaseUrl:"http://192.168.129.43:9010/service"},authorization:{authenticationUrl:"/web-sso/#/",htmlBaseContext:"/web-sys4",clientId:"2135E3D00337471783D6AF46BD43CE4B",indexPage:Object({NODE_ENV:"production",VUE_APP_CLIENT_ID:"2135E3D00337471783D6AF46BD43CE4B",VUE_APP__BASE_URL:"/service/",VUE_APP__HTML_BASE:"/web-sys4",VUE_APP__PUBLIC_PATH:"/web-sys4/",VUE_APP__RESPONSE_TYPE:"code",VUE_APP__SCOPE:"ALL",VUE_APP__SSO:"/web-sso/#/",VUE_APP__STATE:"ANY",BASE_URL:"/"}).VUE_APP__PAGE,responseType:"code",scope:"ALL",state:"ANY"},clientCode:"2135E3D00337471783D6AF46BD43CE4B",previlegeCodes:{clients:{add:"SYS_CLIENT_ADD",edit:"",disable:"",enable:""},users:{add:"SYS_USERS_ADD",edit:"SYS_USERS_EDIT",bindRole:"SYS_USERS_BIND_ROLE",reset:"SYS_USERS_RESET_PASSWORD",cancel:"SYS_USERS_CANCEL",freeze:"SYS_USERS_FREEZE",unfreeze:"SYS_USERS_UNFREEZE"},roles:{add:"SYS_ROLES_ADD",edit:"SYS_ROLES_EDIT",bindUser:"SYS_ROLES_BIND_USER",delete:"SYS_ROLES_DELETE"},resources:{}}}},AEj0:function(e,t,r){"use strict";r("VRzm");var n=r("vDqi"),u=r.n(n),a=r("Q2AE"),o=(r("oYx3"),r("XJYT")),s=r("B814"),i=r("Mlzr"),c=u.a.create({headers:{x_requested_with:"XMLHttpRequest"}});c.interceptors.request.use(function(e){return(a["a"].state.auth.token||localStorage.getItem(s["a"].TOKEN_KEY))&&(e.headers.Authorization=a["a"].state.auth.token||localStorage.getItem(s["a"].TOKEN_KEY)),e.url="/service/"+e.url,e},function(e){return Promise.reject(e)}),c.interceptors.response.use(function(e){return e},function(e){if(console.error(e),401!==e.response.status&&403!==e.response.status)return Promise.reject(e.response);a["a"].dispatch("auth/logout").then(function(){Object(i["d"])(),o["Notification"].error({title:"提示",message:e.response.data.meta.message||"未授权"})}).catch(function(e){console.error(e)})}),t["a"]=c},B814:function(e,t,r){"use strict";r("VRzm");var n={INDEX_URL:"/index",INDEX_CODE:"SYS_INDEX",TOKEN_KEY:"VUE-SYS3-TOKEN",ACCESS_TOKEN_KEY:"OAUTH2-ACCESS-TOKEN",ROLES_KEY:"VUE-SYS3-ROLES",USER_KEY:"VUE-SYS3-USER",RESOURCES_KEY:"VUE-SYS3-RESOURCES",PAGE_SIZE:10,PAGE_LIST:[10,20,50,100],state:{VALID:"10A",INVALID:"10X"},RESP_CODE_SUCESS:"200"};t["a"]=n},EDI0:function(e,t,r){},MKSo:function(e,t,r){"use strict";r("VRzm");var n=r("xmWZ"),u=r("qpph"),a=r("AEj0"),o=r("20nU"),s=r.n(o),i=function(){function e(){Object(n["a"])(this,e)}return Object(u["a"])(e,[{key:"getDataPrivileges",value:function(){return a["a"].request({url:"/auth/dataPrivileges",method:"get"})}},{key:"getNewJWT",value:function(e){return a["a"].request({url:"/authorization/jwt/".concat(e),method:"put"})}},{key:"fetchRoles",value:function(e){var t=e.loginAccount;return a["a"].request({url:"/auth/roles",method:"get",params:{loginAccount:t,clientCode:s.a.clientCode}})}},{key:"fetchPrivileges",value:function(e){var t=e.loginAccount;return a["a"].request({url:"/auth/privileges",method:"get",params:{loginAccount:t,clientCode:s.a.clientCode}})}},{key:"getJwtToken",value:function(e){return a["a"].request({url:"/authorization/token",method:"get",params:{code:e}})}},{key:"getUser",value:function(){return a["a"].request({url:"/authorization/user",method:"get"})}},{key:"singleSign",value:function(e){return a["a"].request({url:"/ssoAuthorize/exchange",method:"get",params:e})}}]),e}(),c=new i,l=c,d=r("yT7P"),f=function(){function e(){Object(n["a"])(this,e)}return Object(u["a"])(e,[{key:"getComTag",value:function(e,t){return a["a"].request({url:"/business/dictionary/".concat(e),method:"get",params:t})}}]),e}(),g=new f,p=g,h=function(){function e(){Object(n["a"])(this,e),this.tagCode={accessStrategy:"QRY_CLIENT_ACCESS_STRATEGY",clientType:"QRY_CLIENT_TYPE"}}return Object(u["a"])(e,[{key:"getClientsByPage",value:function(e,t,r){return a["a"].request({url:"/business/client/page",method:"get",params:Object(d["a"])({},r,{pageSize:e,pageNumber:t})})}},{key:"getClientsForTree",value:function(e){return a["a"].request({url:"/business/client/tree",method:"get",params:e})}},{key:"getClients",value:function(e){return a["a"].request({url:"/business/client/clients",method:"get",params:e})}},{key:"getClientsByClientId",value:function(e){return a["a"].request({url:"/business/client/".concat(e),method:"get"})}},{key:"getAccessStrategies",value:function(){return p.getComTag(this.tagCode.accessStrategy)}},{key:"getClientType",value:function(){return p.getComTag(this.tagCode.clientType)}},{key:"getLastestDisplayOrder",value:function(){return a["a"].request({url:"/business/client/order",method:"get"})}},{key:"disableClient",value:function(e){return a["a"].request({url:"/business/client/".concat(e,"/disable"),method:"put"})}},{key:"enableClient",value:function(e){return a["a"].request({url:"/business/client/".concat(e,"/enable"),method:"put"})}},{key:"addClient",value:function(e){return a["a"].request({url:"/business/client",method:"post",data:e})}},{key:"editClient",value:function(e){return a["a"].request({url:"/business/client/".concat(e.clientId),method:"put",data:e})}},{key:"generateKeys",value:function(){return a["a"].request({url:"/business/client/keys",method:"get"})}},{key:"getRelatedRoles",value:function(e){return a["a"].request({url:"/business/client/relatedRoles",method:"get",params:{clientId:e}})}},{key:"getClientAuths",value:function(e){return a["a"].request({url:"/business/client/clientAuths",method:"get",params:{sourceClientId:e}})}},{key:"addClientAuths",value:function(e,t){return a["a"].request({url:"/business/client/clientAuths",method:"put",params:{sourceClientId:e},data:t})}}]),e}(),m=new h,v=m,E=function(){function e(){Object(n["a"])(this,e),this.tagCode={resourceType:"QRY_RESOURCE_TYPE",elementType:"QRY_RESOURCE_ELEMENT_TYPE",httpMethodType:"QRY_RESOURCE_HTTPMETHOD_TYPE"}}return Object(u["a"])(e,[{key:"getResourcesForTree",value:function(e){var t=e.clientId,r=e.pResourceId,n=void 0===r?null:r;return a["a"].request({url:"/business/resource/tree",method:"get",params:{clientId:t,pResourceId:n}})}},{key:"getResourceByResourceId",value:function(e){return a["a"].request({url:"/business/resource/".concat(e),method:"get"})}},{key:"getLastestDisplayOrder",value:function(e){var t=e.clientId,r=e.pResourceId,n=void 0===r?null:r;return a["a"].request({url:"/business/resource/order",method:"get",params:{clientId:t,pResourceId:n}})}},{key:"getResourceType",value:function(){return p.getComTag(this.tagCode.resourceType)}},{key:"getElementType",value:function(){return p.getComTag(this.tagCode.elementType)}},{key:"getHttpMethodType",value:function(){return p.getComTag(this.tagCode.httpMethodType)}},{key:"addResource",value:function(e){return a["a"].request({url:"/business/resource",method:"post",data:e})}},{key:"editResource",value:function(e){return a["a"].request({url:"/business/resource/".concat(e.resourceId),method:"put",data:e})}},{key:"removeResource",value:function(e){return a["a"].request({url:"/business/resource/".concat(e),method:"delete"})}}]),e}(),S=new E,b=S,y=function(){function e(){Object(n["a"])(this,e),this.tagCode={userStateCode:"QRY_COMMON_STATE",userAccountTypeCode:"QRY_USER_ACCOUNT_TYPE"}}return Object(u["a"])(e,[{key:"getUserByPage",value:function(e,t,r){return a["a"].request({url:"/business/user/page",method:"get",params:Object(d["a"])({},r,{pageSize:e,pageNumber:t})})}},{key:"getUserStates",value:function(){return p.getComTag(this.tagCode.userStateCode)}},{key:"getDefaultPassword",value:function(){return a["a"].request({url:"/business/user/getDefaultPassword",method:"get"})}},{key:"getAccountTypes",value:function(){return p.getComTag(this.tagCode.userAccountTypeCode)}},{key:"getUserByUserId",value:function(e){return a["a"].request({url:"/business/user/get/".concat(e),method:"get"})}},{key:"addUser",value:function(e){return a["a"].request({url:"/business/user/add",method:"post",data:e})}},{key:"editUser",value:function(e){return a["a"].request({url:"/business/user/edit/".concat(e.userId),method:"put",data:e})}},{key:"resetPassword",value:function(e){return a["a"].request({url:"/business/user/reset/".concat(e),method:"put"})}},{key:"cancel",value:function(e){return a["a"].request({url:"/business/user/cancel/".concat(e),method:"put"})}},{key:"freeze",value:function(e){return a["a"].request({url:"/business/user/freeze/".concat(e),method:"put"})}},{key:"unfreeze",value:function(e){return a["a"].request({url:"/business/user/unfreeze/".concat(e),method:"put"})}},{key:"addUserRole",value:function(e,t){return a["a"].request({url:"/business/user/bindRole/user/".concat(e,"/role/").concat(t),method:"put"})}},{key:"removeUserRole",value:function(e,t){return a["a"].request({url:"/business/user/unbindRole/user/".concat(e,"/role/").concat(t),method:"delete"})}},{key:"getRelatedClients",value:function(e){return a["a"].request({url:"/business/user/getRelatedClients/".concat(e),method:"get"})}}]),e}(),R=new y,_=R,O=function(){function e(){Object(n["a"])(this,e)}return Object(u["a"])(e,[{key:"getRoleByPage",value:function(e,t,r){return a["a"].request({url:"/business/role/page",method:"get",params:Object(d["a"])({},r,{pageSize:e,pageNumber:t})})}},{key:"getRelatedClients",value:function(){return a["a"].request({url:"/business/role/relatedClients",method:"get"})}},{key:"getRoleTypes",value:function(){return a["a"].request({url:"/business/role/types",method:"get"})}},{key:"getRoleLevels",value:function(){return a["a"].request({url:"/business/role/levels",method:"get"})}},{key:"getAvailableClients",value:function(e,t){return""===e?a["a"].request({url:"/business/role/availableClients",method:"get"}):a["a"].request({url:"/business/role/availableClients",method:"get",params:{roleId:e,dataPrivilegeId:t}})}},{key:"addRole",value:function(e){return a["a"].request({url:"/business/role/add",method:"post",data:e})}},{key:"editRole",value:function(e){return a["a"].request({url:"/business/role/edit/".concat(e.roleId),method:"put",data:e})}},{key:"deleteRole",value:function(e){return a["a"].request({url:"/business/role/delete/".concat(e),method:"delete"})}},{key:"getRoleByRoleId",value:function(e){return a["a"].request({url:"/business/role/get/".concat(e),method:"get"})}},{key:"addRoleUser",value:function(e,t){return a["a"].request({url:"/business/role/bindUser/role/".concat(e,"/user/").concat(t),method:"put"})}},{key:"removeRoleUser",value:function(e,t){return a["a"].request({url:"/business/role/unbindRole/role/".concat(e,"/user/").concat(t),method:"delete"})}},{key:"getRolesByPage",value:function(e,t,r){return a["a"].request({url:"/business/user/roles/page",method:"get",params:Object(d["a"])({},r,{pageSize:e,pageNumber:t})})}},{key:"getUsersByPage",value:function(e,t,r){return a["a"].request({url:"/business/role/users/page",method:"get",params:Object(d["a"])({},r,{pageSize:e,pageNumber:t})})}},{key:"getSyncResourceForTree",value:function(e){var t=e.clientId,r=e.roleId;return a["a"].request({url:"/business/role/tree",method:"get",params:{clientId:t,roleId:r}})}}]),e}(),k=new O,T=k,C=function(){function e(){Object(n["a"])(this,e)}return Object(u["a"])(e,[{key:"getOrganizationList",value:function(e){return a["a"].request({url:"/business/org",method:"get",params:{parentOrgId:e}})}},{key:"getOrganization",value:function(e){return a["a"].request({url:"/business/org/".concat(e),method:"get"})}},{key:"addOrganization",value:function(e){return a["a"].request({url:"/business/org",method:"post",data:e})}},{key:"editOrganization",value:function(e){return a["a"].request({url:"/business/org",method:"put",data:e})}},{key:"deleteOrganization",value:function(e){return a["a"].request({url:"/business/org/".concat(e),method:"delete"})}}]),e}(),q=new C,I=q,U=function(){function e(){Object(n["a"])(this,e)}return Object(u["a"])(e,[{key:"getOrganizationList",value:function(){return a["a"].request({url:"/business/org",method:"get"})}},{key:"getStaffList",value:function(e){return a["a"].request({url:"/business/staff",method:"get",params:e})}},{key:"addStaff",value:function(e){return a["a"].request({url:"/business/staff",method:"post",data:e})}},{key:"editStaff",value:function(e){return a["a"].request({url:"/business/staff",method:"put",data:e})}},{key:"deleteStaff",value:function(e){return a["a"].request({url:"/business/staff/".concat(e),method:"delete"})}},{key:"getDic",value:function(e,t){return a["a"].request({url:"/common/dictionary",method:"get",params:{tableName:e,columnName:t}})}}]),e}(),w=new U,A=w,P=function(){function e(){Object(n["a"])(this,e)}return Object(u["a"])(e,[{key:"gerPrivilegeList",value:function(e,t){return a["a"].request({url:"/business/privilege",method:"get",params:{parentId:e,id:t}})}},{key:"gerPrivilege",value:function(e){return a["a"].request({url:"/business/privilege/".concat(e),method:"get"})}},{key:"addPrivilege",value:function(e){return a["a"].request({url:"/business/privilege",method:"post",data:e})}},{key:"editPrivilege",value:function(e){return a["a"].request({url:"/business/privilege",method:"put",data:e})}},{key:"deletePrivilege",value:function(e){return a["a"].request({url:"/business/privilege/".concat(e),method:"delete"})}}]),e}(),N=new P,Y=N;t["a"]={auth:l,clients:v,resources:b,users:_,roles:T,organizations:I,staffs:A,privileges:Y}},Mlzr:function(e,t,r){"use strict";r.d(t,"d",function(){return a}),r.d(t,"b",function(){return o}),r.d(t,"c",function(){return s}),r.d(t,"a",function(){return i});r("pIFo"),r("Oyvg"),r("rGqo"),r("KKXr"),r("VRzm");var n=r("20nU"),u=r.n(n),a=function(e){var t=window.location.protocol+"//"+window.location.host;window.location.href=t+u.a.authorization.authenticationUrl+"?client_id="+u.a.authorization.clientId+"&response_type=code"+(e?"&state="+e:"")+"&redirect_uri="+t+u.a.authorization.htmlBaseContext},o=function(e){var t=window.location.href,r=null;return t.substring(t.indexOf("?")+1).split("&").filter(function(t){var n=t.split("=");n[0]===e&&(r=n[1])}),r},s=function(e,t,r){r.forEach(function(e){delete e.children});var n={};r.forEach(function(t){n[t[e]]=t});var u=[];return r.forEach(function(e){var r=n[e[t]];r?(r.children||(r.children=[])).push(e):u.push(e)}),u},i=function(e,t){var r=new Date(e),n={"y+":r.getFullYear(),"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds(),"q+":Math.floor((r.getMonth()+3)/3),"S+":r.getMilliseconds()};for(var u in n)if(new RegExp("("+u+")").test(t))if("y+"===u)t=t.replace(RegExp.$1,(""+n[u]).substr(4-RegExp.$1.length));else if("S+"===u){var a=RegExp.$1.length;a=1===a?3:a,t=t.replace(RegExp.$1,("00"+n[u]).substr((""+n[u]).length-1,a))}else t=t.replace(RegExp.$1,1===RegExp.$1.length?n[u]:("00"+n[u]).substr((""+n[u]).length));return t}},Q2AE:function(e,t,r){"use strict";r("VRzm");var n=r("Kw5r"),u=r("L2JU"),a={dataId:"",privilegeList:""},o=(r("ls82"),r("MECJ")),s=r("MKSo"),i={initDataPrivileges:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,r){var n,u,a,o,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,u=t.dispatch,t.state,e.next=3,s["a"].auth.getDataPrivileges();case 3:if(a=e.sent,o=a.data.data||[],n("setPrivilegeList",JSON.stringify(o)),n("setDataId",""),!o||1!==o.length){e.next=13;break}return e.next=10,s["a"].auth.getNewJWT(o[0].id);case 10:i=e.sent,n("setDataId",o[0].id),u("auth/setToken",i.data.data,{root:!0});case 13:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}()},c={setDataId:function(e,t){e.dataId=t,localStorage.setItem("dataId",t)},setPrivilegeList:function(e,t){e.privilegeList=t,localStorage.setItem("privilegeList",t)}},l={getDataId:function(e){return localStorage.getItem("dataId")},getPrivilegeList:function(e){return localStorage.getItem("privilegeList")}},d={namespaced:!0,state:a,getters:l,actions:i,mutations:c},f={token:null,user:null,roles:null,resources:null},g=(r("SRfc"),r("pIFo"),r("k5N+")),p=(r("rGqo"),r("yt8O"),r("Mlzr")),h=r("B814"),m={initJwtToken:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,r){var n,u,a,o,i,c,l,d,f,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,u=t.dispatch,t.state,a=r.code,e.next=4,s["a"].auth.getJwtToken(a);case 4:return o=e.sent,void 0===o&&u("logout"),i=o.data,c=i.code,l=i.data,h["a"].RESP_CODE_SUCESS!==c&&(alert("接口异常"),u("logout")),d=l.jwtToken,l.accessToken,n("setToken",{token:d}),e.next=12,s["a"].auth.getUser();case 12:f=e.sent,p=f.data.data,console.log(f),n("setUser",{user:p}),Promise.all([s["a"].auth.fetchRoles({loginAccount:p.loginAcct}),s["a"].auth.fetchPrivileges({loginAccount:p.loginAcct})]).then(function(e){var t=Object(g["a"])(e,2),r=t[0],u=t[1];n("setRoles",{roles:r.data.data}),n("setResources",{resources:u.data.data})}).catch(function(e){console.error(e),alert("接口异常")});case 17:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),logout:function(e){var t=e.commit;t("clear"),Object(p["d"])()},singleSign:function(e,t){var r=t.path,n=/^sso:.+:\/\/\/.+/;return new Promise(function(t,u){if(n.test(r)){var a=r.replace(/^sso:.+:\/\//,""),o=r.match(/^sso:(\S*):\/\//)[1],i={access_token_value:e.getters["accessToken"],response_type:config.authorization.responseType,scope:config.authorization.scope,state:config.authorization.state,client_id:o};s["a"].auth.singleSign(i).then(function(e){if(e&&e.data&&"200"===e.data.code){var r=e.data.data.code,n=e.data.data.redirectUris,o=n[1]||n[0];o||u(new Error("目标系统未配置首页地址!")),t({code:r,targetUrl:"".concat(o).concat(a)})}else u(new Error("单点失败,请联系管理员!"))})}else u(new Error("单点地址格式错误!"))})},setToken:function(e,t){var r=e.commit;r("setToken",{token:t})}},v={setUser:function(e,t){localStorage.setItem(h["a"].USER_KEY,JSON.stringify(t.user)),e.user=t.user},setToken:function(e,t){localStorage.setItem(h["a"].TOKEN_KEY,t.token),e.token=t.token},setAccessToken:function(e,t){localStorage.setItem(h["a"].ACCESS_TOKEN_KEY,t.accessToken),e.accessToken=t.accessToken},setRoles:function(e,t){localStorage.setItem(h["a"].ROLES_KEY,JSON.stringify(t.roles)),e.roles=t.roles},setResources:function(e,t){localStorage.setItem(h["a"].RESOURCES_KEY,JSON.stringify(t.resources)),e.resources=t.resources},clear:function(e){localStorage.removeItem(h["a"].USER_KEY),localStorage.removeItem(h["a"].TOKEN_KEY),localStorage.removeItem(h["a"].RESOURCES_KEY),localStorage.removeItem(h["a"].ROLES_KEY),e.user=null,e.roles=null,e.token=null,e.resources=null}},E={menus:function(e){var t=e.resources||JSON.parse(localStorage.getItem(h["a"].RESOURCES_KEY));return null===t?null:t.filter(function(e){return"MENU"===e.resourceType})},elements:function(e){var t=e.resources||JSON.parse(localStorage.getItem(h["a"].RESOURCES_KEY));return null===t?null:t.filter(function(e){return"ELEMENT"===e.resourceType})},resourcesTree:function(e){var t=e.resources||JSON.parse(localStorage.getItem(h["a"].RESOURCES_KEY));return null===t?null:Object(p["c"])("resourceId","pResourceId",t)},menusTree:function(e){var t=e.resources||JSON.parse(localStorage.getItem(h["a"].RESOURCES_KEY));return null===t?null:function(){var e=t.filter(function(e){return"MENU"===e.resourceType});return Object(p["c"])("resourceId","pResourceId",e)}()},elementsTree:function(e){var t=e.resources||JSON.parse(localStorage.getItem(h["a"].RESOURCES_KEY));return null===t?null:function(){var e=t.filter(function(e){return"ELEMENT"===e.resourceType});return Object(p["c"])("resourceId","pResourceId",e)}()},firstMenuUrl:function(e){var t=e.resources||JSON.parse(localStorage.getItem(h["a"].RESOURCES_KEY));if(null!==t){var r=t.filter(function(e){return""!==e.resourceUrl&&null!==e.resourceUrl}),n=t.filter(function(e){return e.previlegeCode===h["a"].INDEX_CODE});return 0!==r.length?r[0].resourceUrl:0!==n.length?n[0].resourceUrl:null}return null},hasRouterPermission:function(e){return function(t){var r=e.resources||JSON.parse(localStorage.getItem(h["a"].RESOURCES_KEY));if(null===r)return!1;var n=r.filter(function(e){return"MENU"===e.resourceType&&e.resourceUrl===t});return n.length>0}}},S={namespaced:!0,state:f,getters:E,actions:m,mutations:v},b={},y={},R={},_={namespaced:!0,state:b,actions:y,mutations:R},O={action:null,resource:{},show:!1},k={setResource:function(e,t){return new Promise(function(){var r=Object(o["a"])(regeneratorRuntime.mark(function r(n,u){var a;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,s["a"].resources.getResourceByResourceId(t);case 3:a=r.sent,e.commit("setResource",a.data.data),n(),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),u(r.t0);case 11:case"end":return r.stop()}},r,this,[[0,8]])}));return function(e,t){return r.apply(this,arguments)}}())}},T={setResource:function(e,t){e.resource=t},setAction:function(e,t){e.action=t},setShow:function(e,t){e.show=t}},C={namespaced:!0,state:O,actions:k,mutations:T};n["default"].use(u["a"]);t["a"]=new u["a"].Store({modules:{client:_,resources:C,auth:S,privilege:d}})},Vtdi:function(e,t,r){"use strict";r.r(t);r("VRzm");var n=r("Kw5r"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},a=[],o=(r("ZL7j"),r("KHd+")),s={},i=Object(o["a"])(s,u,a,!1,null,null,null),c=i.exports,l=r("oYx3"),d=r("Q2AE"),f=r("XJYT"),g=r.n(f),p=(r("D66Q"),r("20nU")),h=r.n(p),m=r("AEj0"),v=r("MKSo"),E=r("B814");n["default"].use(g.a),n["default"].prototype.$http=m["a"],n["default"].prototype.$api=v["a"],n["default"].prototype.$previlegeCodes=h.a.previlegeCodes,n["default"].config.productionTip=!1,n["default"].directive("shiro",{inserted:function(e,t){if("hasPermission"===t.arg){var r=d["a"].state.auth.resources||JSON.parse(localStorage.getItem(E["a"].RESOURCES_KEY)),n=t.value,u=r.map(function(e){return"ELEMENT"===e.resourceType?e.privilegeCode:null}).filter(function(e){return null!==e});-1===u.indexOf(n)&&e.parentNode.removeChild(e)}}}),new n["default"]({router:l["a"],store:d["a"],render:function(e){return e(c)}}).$mount("#app")},ZL7j:function(e,t,r){"use strict";var n=r("EDI0"),u=r.n(n);u.a},oYx3:function(e,t,r){"use strict";r("ls82");var n=r("MECJ"),u=(r("VRzm"),r("Kw5r")),a=r("jE9Z"),o=r("Q2AE"),s=r("B814"),i=r("Mlzr"),c=r("XJYT");u["default"].use(a["a"]);var l={main:"/",index:"/index",userSection:"/view/user/index",roleSection:"/view/role/index",resourceSection:"/view/resource/index",organizationSection:"/view/organization/index",staffSection:"/view/staff/index",privilegeSection:"/view/privilege/index",clientSection:"/view/client/index"},d=new a["a"]({mode:"hash",routes:[{name:"main",path:l.main,meta:{requireAuth:!0},component:function(e){return r.e(11).then(function(){var t=[r("svSY")];e.apply(null,t)}.bind(this)).catch(r.oe)},children:[{name:"index",path:l.index,meta:{requireAuth:!0},component:function(e){return r.e(10).then(function(){var t=[r("p5vw")];e.apply(null,t)}.bind(this)).catch(r.oe)}},{name:"user",path:l.userSection,meta:{requireAuth:!0},component:function(e){return r.e(9).then(function(){var t=[r("0uCC")];e.apply(null,t)}.bind(this)).catch(r.oe)}},{name:"client",path:l.clientSection,meta:{requireAuth:!0},component:function(e){return r.e(8).then(function(){var t=[r("zQ75")];e.apply(null,t)}.bind(this)).catch(r.oe)}},{name:"organization",path:l.organizationSection,meta:{requireAuth:!0},component:function(e){return r.e(7).then(function(){var t=[r("xjvw")];e.apply(null,t)}.bind(this)).catch(r.oe)}},{name:"staff",path:l.staffSection,meta:{requireAuth:!0},component:function(e){return r.e(6).then(function(){var t=[r("tQXy")];e.apply(null,t)}.bind(this)).catch(r.oe)}},{name:"privilege",path:l.privilegeSection,meta:{requireAuth:!0},component:function(e){return r.e(5).then(function(){var t=[r("fFT+")];e.apply(null,t)}.bind(this)).catch(r.oe)}},{name:"role",path:l.roleSection,meta:{requireAuth:!0},component:function(e){return r.e(4).then(function(){var t=[r("UOUU")];e.apply(null,t)}.bind(this)).catch(r.oe)}},{name:"resource",path:l.resourceSection,meta:{requireAuth:!0},component:function(e){return r.e(3).then(function(){var t=[r("TWCZ")];e.apply(null,t)}.bind(this)).catch(r.oe)}}]},{name:"login",path:"/login",meta:{requireAuth:!1},component:function(e){return r.e(2).then(function(){var t=[r("bsW6")];e.apply(null,t)}.bind(this)).catch(r.oe)}},{path:"/logout",name:"logout",meta:{requireAuth:!1}},{name:"dataprivilege",path:"/privilege",props:function(e){return{route:e}},meta:{requireAuth:!0},component:function(e){return r.e(1).then(function(){var t=[r("A08n")];e.apply(null,t)}.bind(this)).catch(r.oe)}},{name:"error",path:"/auth/error",props:function(e){return{errorCode:e.query.errorCode}},meta:{requireAuth:!1},component:function(e){return r.e(0).then(function(){var t=[r("BE+N")];e.apply(null,t)}.bind(this)).catch(r.oe)}}]});d.beforeEach(function(e,t,r){var u=localStorage.getItem(s["a"].TOKEN_KEY),a=localStorage.getItem("dataId"),d=JSON.parse(localStorage.getItem("privilegeList"));if(null===u||"undefined"===u||void 0===u){var f=c["Loading"].service({fullscreen:!0,text:"加载系统配置，请稍等"}),g=e.query.code;g=g||Object(i["b"])("code"),g&&-1!==g.indexOf("#")&&(g=g.substring(0,g.indexOf("#"))),g?o["a"].dispatch("auth/initJwtToken",{code:g}).then(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:f.close(),o["a"].dispatch("privilege/initDataPrivileges").then(function(){d&&d.length>1?r("/privilege"):r("/index")});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()):Object(i["d"])()}else{if(""===a&&d&&d.length>1&&("/"===e.path||"/index"===e.path))return void r("/privilege");if("/auth/error"===e.path||"/"===e.path||"/index"===e.path||"/privilege"===e.path)return void r();var p=200,h=!1;for(var m in l)if(l[m]===e.path){h=!0;break}p=h?o["a"].getters["auth/hasRouterPermission"](e.path)?200:403:404,200===p?r():r("/auth/error?errorCode="+p)}}),d.onError(function(e){console.error(e),console.log("导航出错了")}),t["a"]=d}});
//# sourceMappingURL=app.0aecd8e6.js.map