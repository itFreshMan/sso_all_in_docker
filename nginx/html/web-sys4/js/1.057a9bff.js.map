{"version":3,"sources":["webpack:///./src/components/PrivilegeChoose.vue?0735","webpack:///src/components/PrivilegeChoose.vue","webpack:///./src/components/PrivilegeChoose.vue?7bcf","webpack:///./src/components/PrivilegeChoose.vue","webpack:///./src/components/PrivilegeChoose.vue?9ad2"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","overflow","height","attrs","gutter","span","_v","_l","privilege","index","label","id","border","model","value","callback","$$v","dataId","expression","_s","name","width","margin-bottom","data","roles","highlight-current-row","prop","min-width","show-overflow-tooltip","show-tooltip-when-overflow","scopedSlots","_u","key","fn","scope","formatClient","row","clients","directives","rawName","dataPrivilegeList","length","type","on","click","change","layout","staticRenderFns","PrivilegeChoosevue_type_script_lang_js","props","created","JSON","parse","$store","getters","methods","Object","objectSpread","vuex_esm","setToken","routeLogout","setDataId","_change","asyncToGenerator","regeneratorRuntime","mark","_callee","response","wrap","_context","prev","next","api","auth","getNewJWT","sent","$router","push","path","$message","showClose","message","stop","apply","arguments","_this","$confirm","then","_","util","map","item","clientName","join","components_PrivilegeChoosevue_type_script_lang_js","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_PrivilegeChoose_vue_vue_type_style_index_0_lang_css__WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/1.057a9bff.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',{staticClass:\"privilege\",staticStyle:{\"overflow\":\"auto\",\"height\":\"100%\"}},[_c('el-main',[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":14}},[_c('div',{staticClass:\"privilege-title\"},[_c('span',[_vm._v(\"请确认您的管理权限\")])]),_c('el-divider'),_c('div',{staticClass:\"privilege-content\"},[_vm._l((_vm.dataPrivilegeList),function(privilege,index){return _c('div',[_c('el-radio',{staticClass:\"radio\",attrs:{\"label\":privilege.id,\"border\":\"\"},model:{value:(_vm.dataId),callback:function ($$v) {_vm.dataId=$$v},expression:\"dataId\"}},[_vm._v(_vm._s(privilege.name ? privilege.name : '未知'))]),_c('el-table',{staticStyle:{\"width\":\"100%\",\"margin-bottom\":\"40px\"},attrs:{\"data\":privilege.roles,\"highlight-current-row\":\"\",\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"roleName\",\"label\":\"角色\",\"min-width\":\"100px\",\"show-overflow-tooltip\":\"\"}}),_c('el-table-column',{attrs:{\"label\":\"系统\",\"show-tooltip-when-overflow\":\"\",\"min-width\":\"200px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm.formatClient(scope.row.clients)))])]}}])})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(index < _vm.dataPrivilegeList.length-1),expression:\"index < dataPrivilegeList.length-1\"}]},[_c('el-divider')],1)],1)}),_c('div',{staticClass:\"content-button\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.change}},[_vm._v(\"确定\")]),_c('el-button',{on:{\"click\":_vm.layout}},[_vm._v(\"换个账号登录\")])],1)],2)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-container\r\n      class=\"privilege\" style=\"overflow: auto;height: 100%\">\r\n    <el-main>\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"14\">\r\n          <div class=\"privilege-title\">\r\n            <span>请确认您的管理权限</span>\r\n          </div>\r\n          <el-divider></el-divider>\r\n          <div class=\"privilege-content\">\r\n            <div v-for=\"(privilege, index) in dataPrivilegeList\">\r\n              <el-radio v-model=\"dataId\" :label=\"privilege.id\" border class=\"radio\">{{privilege.name ? privilege.name : '未知'}}</el-radio>\r\n              <el-table :data=\"privilege.roles\" highlight-current-row style=\"width: 100%;margin-bottom: 40px\" border>\r\n                <el-table-column prop=\"roleName\" label=\"角色\" min-width=\"100px\" show-overflow-tooltip></el-table-column>\r\n                <el-table-column label=\"系统\" show-tooltip-when-overflow min-width=\"200px\">\r\n                  <template slot-scope=\"scope\">\r\n                    <span>{{ formatClient(scope.row.clients) }}</span>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n              <div v-show=\"index < dataPrivilegeList.length-1\">\r\n                <el-divider ></el-divider>\r\n              </div>\r\n            </div>\r\n            <div class=\"content-button\">\r\n              <el-button type=\"primary\" @click=\"change\">确定</el-button>\r\n              <el-button @click=\"layout\">换个账号登录</el-button>\r\n            </div>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </el-main>\r\n  </el-container>\r\n</template>\r\n\r\n<script>\r\n  import api from '@common/api/index';\r\n  import {toSSO} from '@common/util';\r\n  import {mapActions, mapMutations} from 'vuex';\r\n\r\n  export default {\r\n    name: 'PrivilegeChoose',\r\n    props: ['route'],\r\n    data() {\r\n      return {\r\n        dataPrivilegeList: [],\r\n        dataId: '',\r\n        border: true\r\n      };\r\n    },\r\n    created() {\r\n      // console.log('this.$store',this.$store)\r\n      this.dataPrivilegeList = JSON.parse(this.$store.getters['privilege/getPrivilegeList']);\r\n      this.dataId = this.dataPrivilegeList[0].id;\r\n      /* Promise.all([\r\n        api.auth.getDataPrivileges()\r\n      ]).then(result => {\r\n        this.dataPrivilegeList = result[0].data.data;\r\n        // console.log('this.dataPrivilegeList',this.dataPrivilegeList)\r\n        if (!this.dataPrivilegeList) {\r\n          alert('当前用户无数据权限');\r\n          this.routeLogout()\r\n          toSSO()\r\n        } else if (this.dataPrivilegeList && this.dataPrivilegeList.length === 1) {\r\n          //获取接口\r\n          this.dataId = this.dataPrivilegeList[0].id;\r\n          this.change();\r\n        } else if (this.dataPrivilegeList && this.dataPrivilegeList.length > 1) {\r\n          this.dataId = this.dataPrivilegeList[0].id;\r\n        }\r\n      })*/\r\n    },\r\n    methods: {\r\n      ...mapActions({\r\n        setToken: 'auth/setToken',\r\n        routeLogout: 'auth/logout',\r\n      }),\r\n      ...mapMutations({\r\n        setDataId: 'privilege/setDataId',\r\n      }),\r\n      async change() {\r\n        let response = await api.auth.getNewJWT(this.dataId);\r\n        if (response.data.data) {\r\n          this.setToken(response.data.data);\r\n          this.setDataId(this.dataId);\r\n          // console.log('this.$store', this.$store)\r\n          this.$router.push({path: '/index'});\r\n        } else {\r\n          this.$message({\r\n            showClose: true,\r\n            message: '获取新jwt失败',\r\n            type: 'error'\r\n          });\r\n        }\r\n      },\r\n      layout() {\r\n        this.$confirm('是否登出？')\r\n          .then((_) => {\r\n            this.routeLogout();\r\n            toSSO();\r\n          });\r\n      },\r\n      formatClient(clients) {\r\n        if (clients.length > 0) {\r\n          return clients.map((item) => item.clientName).join('、');\r\n        }\r\n        return '';\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style>\r\n  .privilege .privilege-title {\r\n    width: 100%;\r\n    /*border-bottom: #909399 1px solid;*/\r\n    padding: 0 0 0 20px;\r\n    margin-bottom: 20px;\r\n  }\r\n\r\n  .privilege .privilege-content {\r\n    padding: 15px;\r\n  }\r\n\r\n  .privilege .privilege-content .content-button {\r\n    margin-top: 20px;\r\n  }\r\n\r\n  .privilege .privilege-content .radio {\r\n    margin-bottom: 10px;\r\n  }\r\n  .el-table {\r\n    border: 1px solid #EBEEF5;\r\n  }\r\n  .el-table th{\r\n   background-color:#e8f1f9;\r\n   font-weight: 545;\r\n   text-align: center;\r\n}\r\n  .el-table td{\r\n    text-align: center;\r\n  }\r\n  .el-table--fit {\r\n    border: 1px solid #EBEEF5;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PrivilegeChoose.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PrivilegeChoose.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./PrivilegeChoose.vue?vue&type=template&id=6c50d72a\"\nimport script from \"./PrivilegeChoose.vue?vue&type=script&lang=js\"\nexport * from \"./PrivilegeChoose.vue?vue&type=script&lang=js\"\nimport style0 from \"./PrivilegeChoose.vue?vue&type=style&index=0&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PrivilegeChoose.vue?vue&type=style&index=0&lang=css\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PrivilegeChoose.vue?vue&type=style&index=0&lang=css\""],"sourceRoot":""}